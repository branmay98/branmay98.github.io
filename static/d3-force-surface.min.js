// Version 0.5.7 d3-force-surface - https://github.com/vasturiano/d3-force-surface
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).d3=t.d3||{})}(this,(function(t){"use strict";function n(t){return function(){return t}}t.forceSurface=function(){var t,r,o=[],f=1,e=function(t){return 1},u=function(t){return t.from},a=function(t){return t.to},i=function(t){return!!t.oneWay};function c(){function n(t,n){return r(t.from,n.from,n.to)!=r(t.to,n.from,n.to)&&r(t.from,t.to,n.from)!=r(t.from,t.to,n.to);function r(t,n,r){var o=(r.y-t.y)*(n.x-t.x),f=(n.y-t.y)*(r.x-t.x);return o>f+Number.EPSILON?1:o+Number.EPSILON<f?-1:0}}function c(t,n){var r=t.x,o=t.y;return{x:r+n.x,y:o+n.y}}function y(t,n){var r=x(t.x,t.y);return m(r.d,r.a+n)}function x(t,n){return t=t||0,{d:Math.sqrt(t*t+n*n),a:0===t&&0===n?0:Math.atan(n/t)+(t<0?Math.PI:0)}}function m(t,n){return{x:t*Math.cos(n),y:t*Math.sin(n)}}t.forEach((function(t){var h=e(t),v=x(t.vx,t.vy),d={from:{x:t.x,y:t.y},to:{x:t.x+t.vx,y:t.y+t.vy}};o.forEach((function(o){var e={from:u(o),to:a(o)},s=x(e.to.x-e.from.x,e.to.y-e.from.y),l=function(t){var n=2*Math.PI;for(;t<0;)t+=n;for(;t>n;)t-=n;return t}(s.a-v.a)<Math.PI;if(!l||!i(o)){var M=function(t,n){var r=t.from,o=t.to;return{from:c(r,n),to:c(o,n)}}(d,m(h,s.a+Math.PI/2*(l?-1:1))),p=n(e,{from:c(t,m(h,s.a-Math.PI/2)),to:c(t,m(h,s.a+Math.PI/2))});if(p||n(e,M)){var I=m(v.d,v.a-s.a);I.y*=-f;var P=y(I,s.a);if(t.vx=P.x,t.vy=P.y,p&&!i(o)){var g=m(y(c(M.from,{x:-e.from.x,y:-e.from.y}),-s.a).y,s.a-Math.PI/2);t.x+=g.x,t.y+=g.y}r&&r(t,o)}}}))}))}return c.initialize=function(n){t=n},c.surfaces=function(t){return arguments.length?(o=t,c):o},c.elasticity=function(t){return arguments.length?(f=t,c):f},c.radius=function(t){return arguments.length?(e="function"==typeof t?t:n(+t),c):e},c.from=function(t){return arguments.length?(u=t,c):u},c.to=function(t){return arguments.length?(a=t,c):a},c.oneWay=function(t){return arguments.length?(i="function"==typeof t?t:n(!!t),c):i},c.onImpact=function(t){return arguments.length?(r=t,c):r},c},Object.defineProperty(t,"__esModule",{value:!0})}));